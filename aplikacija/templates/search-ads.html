{% load static %}

<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <title>Pretraga Oglasa</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'style.css' %}">
</head>

<body>

<!-- ✅ HEADER -->
<header>
    <nav class="navbar navbar-expand-lg container">
        <a class="navbar-brand d-flex align-items-center gap-2" href="{% url 'home' tip=myType %}">
            <img src="{% static 'logo1.png' %}" alt="StudyBuddy logo" class="logo-img">
            <span class="fw-semibold text-dark">StudyBuddy</span>
        </a>

        <div class="ms-auto">
            <a href="{% url 'home' tip=myType %}" class="btn btn-outline-secondary">Nazad</a>
        </div>
    </nav>
</header>


<!-- ✅ MAIN -->
<main class="container py-4">

    <h2 class="fw-bold mb-4">Pretraga oglasa</h2>

    <!-- ✅ FILTER FORMA -->
    <form method="post" action="{% url 'search_ads' %}" class="card shadow-sm p-4 mb-4">
        {% csrf_token %}

        <div class="row g-3">

            <div class="col-md-6">
                <label for="search" class="form-label fw-bold">Pretraži ključnu reč:</label>
                <input type="search" id="search" name="search" class="form-control"
                       placeholder="Unesi ključnu reč..."
                       value="{{ request.GET.search }}">
            </div>

            <div class="col-md-6">
                <label for="tag" class="form-label fw-bold">Tag:</label>
                <input type="text" id="tag" name="tag" class="form-control"
                       placeholder="npr. Python, PSI..."
                       value="{{ request.GET.tag }}">
            </div>

            <div class="col-md-6">
                <label class="form-label fw-bold">Tip pomoći:</label>

                <div class="form-check">
                    <input type="checkbox" class="form-check-input" name="tip" value="Pomoc pri izradi">
                    <label class="form-check-label">Pomoć pri izradi projekta</label>
                </div>

                <div class="form-check">
                    <input type="checkbox" class="form-check-input" name="tip" value="Pomoc pri ucenju">
                    <label class="form-check-label">Pomoć pri učenju</label>
                </div>

                <div class="form-check">
                    <input type="checkbox" class="form-check-input" name="tip"
                           value="Pomoc za recenziranje projekta">
                    <label class="form-check-label">Recenziranje projekta</label>
                </div>
            </div>

            <div class="col-md-6">
                <label for="min_rating" class="form-label fw-bold">Minimalna ocena tutora:</label>
                <input type="number" id="min_rating" name="min_rating"
                       class="form-control" min="1" max="5" step="0.1"
                       placeholder="npr. 4.0"
                       value="{{ request.GET.min_rating }}">
            </div>

        </div>

        <button class="btn btn-primary w-100 mt-4">Primeni filtere</button>
    </form>


    <!-- ✅ REZULTATI -->
    {% if oglasi %}
        <div class="row g-4">
            {% for oglas in oglasi %}
                <div class="col-md-6">
                    <div class="card p-3 shadow-sm h-100">
                        <h5 class="fw-bold mb-1">
                            <a href="{% url 'view_ad' oglas.idnotice %}">
                                {{ oglas.title }}
                            </a>
                        </h5>

                        <p class="text-muted small mb-1">Predmet: {{ oglas.subject }}</p>
                        <p class="text-muted small mb-1">
                            Postavio:
                            {{ oglas.idpublisher.name }} {{ oglas.idpublisher.surname }}
                        </p>
                        <p class="small mb-2">Tip: {{ oglas.type }}</p>

                        <div class="text-end">
                            <a href="{% url 'view_ad' oglas.idnotice %}" class="btn btn-outline-primary btn-sm">
                                Pogledaj
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>

    {% else %}
        <p class="text-center text-muted mt-3">Nema oglasa koji odgovaraju filterima.</p>
    {% endif %}

</main>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
